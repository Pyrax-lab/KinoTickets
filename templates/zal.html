{% extends "base.html" %}
{% load static %}

{% block main %}
<div class=></div>
<div class="calendar-square white"></div>

    <h1 id="curent_film_id">{{curent_film.name}}</h1>
    

        <div id="container_for_square">

        </div>

<script>
    
    var film = document.getElementById('curent_film_id')
    film = film.firstChild.data
    var socket = new WebSocket('ws://localhost:8000/ws/kinozal/')

    socket.onopen = function(event){
        socket.send(film)
    }

    socket.onmessage = function(event){
    

        var data = JSON.parse(event.data);  
        console.log(data)
        count = data.message
        var container = document.getElementById('container_for_square');

        for ( var i = 0; i < count; i++){
            var green = document.createElement('div')
            green.className = "calendar-square green"
            container.appendChild(green)
        }
    }
    
    
    
</script>

{% endblock main %}